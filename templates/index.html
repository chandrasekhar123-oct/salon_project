<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SalonGo ‚Äì Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --purple: #a855f7;
      --pink: #ec4899;
      --dark: #0f0a1e;
      --card: rgba(255, 255, 255, 0.04);
      --border: rgba(255, 255, 255, 0.09);
      --text: #e2e8f0;
      --muted: #64748b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(15, 10, 30, 0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 14px 20px;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .welcome-block h2 {
      font-size: 18px;
      font-weight: 800;
      color: #fff;
    }

    .welcome-block p {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 2px;
    }

    .header-icons {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s;
      text-decoration: none;
      position: relative;
    }

    .icon-btn:hover {
      background: rgba(168, 85, 247, 0.15);
      border-color: var(--purple);
    }

    .notif-dot {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 8px;
      height: 8px;
      background: #ef4444;
      border-radius: 50%;
      border: 2px solid var(--dark);
    }

    .avatar-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--purple), var(--pink));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 15px;
      color: #fff;
      cursor: pointer;
      border: 2px solid rgba(168, 85, 247, 0.4);
    }

    /* Search */
    .search-wrap {
      position: relative;
    }

    .search-wrap input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid var(--border);
      border-radius: 14px;
      color: #fff;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: 0.3s;
    }

    .search-wrap input:focus {
      border-color: var(--purple);
      background: rgba(168, 85, 247, 0.08);
    }

    .search-wrap input::placeholder {
      color: var(--muted);
    }

    .search-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      font-size: 14px;
    }

    /* ‚îÄ‚îÄ MAIN SCROLL AREA ‚îÄ‚îÄ */
    .main {
      padding: 0 20px 90px;
    }

    /* ‚îÄ‚îÄ SECTION TITLE ‚îÄ‚îÄ */
    .section-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 24px 0 14px;
    }

    .section-head h3 {
      font-size: 17px;
      font-weight: 800;
      color: #fff;
    }

    .see-all {
      font-size: 13px;
      color: var(--purple);
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
    }

    /* ‚îÄ‚îÄ CATEGORIES ‚îÄ‚îÄ */
    .categories {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
      scrollbar-width: none;
    }

    .categories::-webkit-scrollbar {
      display: none;
    }

    .cat-card {
      flex-shrink: 0;
      width: 80px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 14px 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.25s;
    }

    .cat-card:hover,
    .cat-card.active {
      background: rgba(168, 85, 247, 0.15);
      border-color: var(--purple);
      transform: translateY(-3px);
    }

    .cat-icon {
      font-size: 26px;
    }

    .cat-label {
      font-size: 11px;
      font-weight: 700;
      color: #ccc;
      text-align: center;
      line-height: 1.2;
    }

    .cat-card.active .cat-label {
      color: var(--purple);
    }

    /* ‚îÄ‚îÄ OFFERS BANNER ‚îÄ‚îÄ */
    .offers {
      display: flex;
      gap: 14px;
      overflow-x: auto;
      padding-bottom: 4px;
      scrollbar-width: none;
    }

    .offers::-webkit-scrollbar {
      display: none;
    }

    .offer-card {
      flex-shrink: 0;
      min-width: 260px;
      border-radius: 20px;
      padding: 20px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .offer-card.purple {
      background: linear-gradient(135deg, #7c3aed, #a855f7);
    }

    .offer-card.pink {
      background: linear-gradient(135deg, #be185d, #ec4899);
    }

    .offer-card.teal {
      background: linear-gradient(135deg, #0f766e, #14b8a6);
    }

    .offer-title {
      font-size: 20px;
      font-weight: 900;
      color: #fff;
      margin-bottom: 4px;
    }

    .offer-sub {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 14px;
    }

    .offer-btn {
      display: inline-block;
      background: rgba(255, 255, 255, 0.25);
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      padding: 6px 14px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .offer-emoji {
      position: absolute;
      right: 16px;
      top: 16px;
      font-size: 40px;
      opacity: 0.3;
    }

    /* ‚îÄ‚îÄ SALON CARDS ‚îÄ‚îÄ */
    .salons-list {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .salon-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      gap: 0;
      transition: all 0.25s;
    }

    .salon-card:hover {
      border-color: rgba(168, 85, 247, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    }

    .salon-img {
      width: 110px;
      min-height: 110px;
      flex-shrink: 0;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
    }

    .salon-body {
      padding: 14px;
      flex: 1;
    }

    .salon-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .salon-name {
      font-size: 15px;
      font-weight: 800;
      color: #fff;
    }

    .salon-badge {
      font-size: 10px;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 20px;
    }

    .badge-open {
      background: rgba(16, 185, 129, 0.15);
      color: #10b981;
    }

    .badge-closed {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
    }

    .salon-meta {
      display: flex;
      gap: 12px;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .salon-meta span {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .salon-price {
      font-size: 13px;
      font-weight: 700;
      color: var(--purple);
    }

    .salon-actions {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .btn-book {
      flex: 1;
      padding: 9px;
      border-radius: 10px;
      text-align: center;
      background: linear-gradient(135deg, var(--purple), var(--pink));
      color: #fff;
      font-size: 13px;
      font-weight: 700;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn-book:hover {
      opacity: 0.9;
      transform: scale(1.02);
    }

    .btn-fav {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: rgba(236, 72, 153, 0.1);
      border: 1px solid rgba(236, 72, 153, 0.2);
      color: #ec4899;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 14px;
      transition: 0.2s;
    }

    .btn-fav:hover {
      background: rgba(236, 72, 153, 0.2);
    }

    /* ‚îÄ‚îÄ BOOKINGS ‚îÄ‚îÄ */
    .booking-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 16px;
      margin-bottom: 12px;
      transition: 0.2s;
    }

    .booking-card:hover {
      border-color: rgba(168, 85, 247, 0.3);
    }

    .booking-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .booking-service {
      font-size: 15px;
      font-weight: 700;
      color: #fff;
    }

    .status-badge {
      font-size: 11px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 20px;
    }

    .status-confirmed {
      background: rgba(16, 185, 129, 0.15);
      color: #10b981;
    }

    .status-pending {
      background: rgba(251, 191, 36, 0.15);
      color: #fbbf24;
    }

    .status-cancelled {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
    }

    .status-completed {
      background: rgba(99, 102, 241, 0.15);
      color: #818cf8;
    }

    .booking-salon {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .booking-meta {
      display: flex;
      gap: 16px;
      font-size: 12px;
      color: var(--muted);
    }

    .booking-meta span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .booking-price {
      font-size: 15px;
      font-weight: 800;
      color: var(--purple);
      margin-top: 8px;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
    }

    .empty-state .empty-icon {
      font-size: 48px;
      margin-bottom: 12px;
      opacity: 0.4;
    }

    .empty-state p {
      font-size: 14px;
    }

    /* ‚îÄ‚îÄ PROFILE PANEL ‚îÄ‚îÄ */
    .profile-panel {
      background: linear-gradient(145deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.05));
      border: 1px solid rgba(168, 85, 247, 0.2);
      border-radius: 24px;
      padding: 28px;
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-avatar-lg {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--purple), var(--pink));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: 900;
      color: #fff;
      margin: 0 auto 14px;
      border: 3px solid rgba(168, 85, 247, 0.5);
    }

    .profile-name {
      font-size: 20px;
      font-weight: 800;
      color: #fff;
      margin-bottom: 4px;
    }

    .profile-email {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 16px;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .pstat {
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
    }

    .pstat-num {
      font-size: 22px;
      font-weight: 900;
      color: var(--purple);
    }

    .pstat-label {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    /* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(15, 10, 30, 0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      display: flex;
      padding: 8px 0;
      z-index: 200;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 4px;
      cursor: pointer;
      border: none;
      background: none;
      color: var(--muted);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: 0.2s;
    }

    .nav-item i {
      font-size: 20px;
      transition: 0.2s;
    }

    .nav-item.active {
      color: var(--purple);
    }

    .nav-item.active i {
      transform: scale(1.1);
    }

    .nav-item:hover {
      color: var(--purple);
    }

    /* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
    .screen {
      display: none;
    }

    .screen.is-active {
      display: block;
    }

    /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
    .toast-container {
      position: fixed;
      top: 80px;
      right: 16px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .toast {
      background: #1e1030;
      border: 1px solid rgba(168, 85, 247, 0.4);
      color: #fff;
      padding: 12px 18px;
      border-radius: 14px;
      font-size: 13px;
      font-weight: 600;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(40px)
      }

      to {
        opacity: 1;
        transform: translateX(0)
      }
    }

    /* ‚îÄ‚îÄ SIDEBAR (Desktop) ‚îÄ‚îÄ */
    @media(min-width:768px) {
      .app-wrapper {
        display: grid;
        grid-template-columns: 240px 1fr;
        min-height: 100vh;
      }

      .desktop-sidebar {
        background: rgba(255, 255, 255, 0.02);
        border-right: 1px solid var(--border);
        padding: 28px 16px;
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
      }

      .desktop-sidebar .logo {
        font-size: 22px;
        font-weight: 900;
        margin-bottom: 32px;
        padding: 0 10px;
        background: linear-gradient(135deg, var(--purple), var(--pink));
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .sidebar-link {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 12px;
        color: var(--muted);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;
        text-decoration: none;
        margin-bottom: 4px;
      }

      .sidebar-link:hover,
      .sidebar-link.active {
        background: rgba(168, 85, 247, 0.12);
        color: var(--purple);
      }

      .sidebar-link i {
        font-size: 16px;
        width: 20px;
      }

      .bottom-nav {
        display: none;
      }

      .main {
        padding: 0 28px 40px;
      }
    }

    /* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
    ::-webkit-scrollbar {
      width: 4px;
      height: 4px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(168, 85, 247, 0.3);
      border-radius: 10px;
    }

    /* Flash */
    .flash-msg {
      background: rgba(168, 85, 247, 0.15);
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: 12px;
      padding: 12px 16px;
      font-size: 13px;
      color: #c4b5fd;
      margin: 12px 0;
    }

    /* Notification Dropdown */
    .dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      width: 300px;
      background: #1a1030;
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      z-index: 500;
      overflow: hidden;
    }

    .dropdown.open {
      display: block;
      animation: slideIn 0.25s ease;
    }

    .dropdown-header {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
      font-weight: 700;
    }

    .notif-item {
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      display: flex;
      gap: 12px;
      cursor: pointer;
      transition: 0.2s;
    }

    .notif-item:hover {
      background: rgba(168, 85, 247, 0.08);
    }

    .notif-icon-wrap {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(168, 85, 247, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 18px;
    }

    .notif-text p {
      font-size: 13px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 2px;
    }

    .notif-text span {
      font-size: 11px;
      color: var(--muted);
    }
  </style>
</head>

<body>

  <div class="toast-container" id="toastContainer"></div>

  <div class="app-wrapper">

    <!-- ‚ïê‚ïê‚ïê DESKTOP SIDEBAR ‚ïê‚ïê‚ïê -->
    <aside class="desktop-sidebar" id="desktopSidebar">
      <div class="logo">‚úÇÔ∏è SalonGo</div>
      <a class="sidebar-link active" onclick="switchScreen('home',this)"><i class="fas fa-home"></i> Home</a>
      <a class="sidebar-link" onclick="switchScreen('search',this)"><i class="fas fa-search"></i> Search</a>
      <a class="sidebar-link" onclick="switchScreen('bookings',this)"><i class="fas fa-calendar-check"></i> Bookings</a>
      <a class="sidebar-link" onclick="switchScreen('favorites',this)"><i class="fas fa-heart"></i> Favorites</a>
      <a class="sidebar-link" onclick="switchScreen('profile',this)"><i class="fas fa-user"></i> Profile</a>
      {% if current_user.role == 'salon_owner' %}
      <a class="sidebar-link" href="{{ url_for('owner_dashboard') }}"
        style="color:#a855f7; margin-top:12px; border:1px dashed rgba(168,85,247,0.3);"><i class="fas fa-store"></i>
        Owner Panel</a>
      {% endif %}
      {% if current_user.role == 'worker' %}
      <a class="sidebar-link" href="{{ url_for('worker_dashboard') }}"
        style="color:#ec4899; margin-top:12px; border:1px dashed rgba(236,72,153,0.3);"><i class="fas fa-briefcase"></i>
        Worker Panel</a>
      {% endif %}
      <div style="margin-top:auto; padding-top:20px; border-top:1px solid var(--border); margin-top:40px;">
        <a class="sidebar-link" href="{{ url_for('logout') }}" style="color:#ef4444;"><i
            class="fas fa-sign-out-alt"></i> Logout</a>
      </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê RIGHT CONTENT ‚ïê‚ïê‚ïê -->
    <div style="flex:1; min-width:0;">

      <!-- ‚îÄ‚îÄ STICKY HEADER ‚îÄ‚îÄ -->
      <div class="header">
        <div class="header-top">
          <div class="welcome-block">
            <h2>üëã Welcome, {{ current_user.name.split()[0] if current_user.is_authenticated else 'Guest' }}</h2>
            <p><i class="fas fa-map-marker-alt" style="color:var(--purple);"></i>
              <span id="locationDisplay">Hyderabad, India</span>
            </p>
          </div>
          <div class="header-icons">
            <!-- Notification -->
            <div style="position:relative;">
              <div class="icon-btn" id="notifBtn" onclick="toggleDropdown('notifDrop')">
                <i class="fas fa-bell"></i>
                <div class="notif-dot"></div>
              </div>
              <div class="dropdown" id="notifDrop">
                <div class="dropdown-header">üîî Notifications</div>
                <div class="notif-item">
                  <div class="notif-icon-wrap">üßñ‚Äç‚ôÄÔ∏è</div>
                  <div class="notif-text">
                    <p>Booking Confirmed!</p><span>Your appointment is set for tomorrow 10 AM</span>
                  </div>
                </div>
                <div class="notif-item">
                  <div class="notif-icon-wrap">üî•</div>
                  <div class="notif-text">
                    <p>Special Spa Offer</p><span>20% OFF on Full Body Massage this weekend</span>
                  </div>
                </div>
                <div class="notif-item">
                  <div class="notif-icon-wrap">‚úÖ</div>
                  <div class="notif-text">
                    <p>Payment Successful</p><span>Invoice #SER-9802 for ‚Çπ1,200 paid</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Profile -->
            <div class="avatar-btn" onclick="switchScreen('profile', null)">
              {{ current_user.name[:2]|upper if current_user.is_authenticated else 'üë§' }}
            </div>
          </div>
        </div>
        <!-- Search -->
        <div class="search-wrap">
          <i class="fas fa-search search-icon"></i>
          <input type="text" id="searchInput" placeholder="Search salons, services, styles..."
            oninput="filterSalons()" />
        </div>
      </div>

      <!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
      <div class="main">

        {% with messages = get_flashed_messages() %}
        {% if messages %}{% for m in messages %}<div class="flash-msg">{{ m }}</div>{% endfor %}{% endif %}
        {% endwith %}

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HOME SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="screen is-active" id="screen-home">

          <!-- CATEGORIES -->
          <div class="section-head">
            <h3>Browse Categories</h3>
            <span class="see-all">View All</span>
          </div>
          <div class="categories" id="categoryRow">
            <div class="cat-card active" onclick="filterCat('all',this)">
              <div class="cat-icon">üõçÔ∏è</div>
              <div class="cat-label">All</div>
            </div>
            <div class="cat-card" onclick="filterCat('Hair',this)">
              <div class="cat-icon">‚úÇÔ∏è</div>
              <div class="cat-label">Hair Cut</div>
            </div>
            <div class="cat-card" onclick="filterCat('Beard',this)">
              <div class="cat-icon">üßî</div>
              <div class="cat-label">Beard</div>
            </div>
            <div class="cat-card" onclick="filterCat('Facial',this)">
              <div class="cat-icon">üíÜ</div>
              <div class="cat-label">Facial</div>
            </div>
            <div class="cat-card" onclick="filterCat('Spa',this)">
              <div class="cat-icon">üßñ</div>
              <div class="cat-label">Spa</div>
            </div>
            <div class="cat-card" onclick="filterCat('Hair Color',this)">
              <div class="cat-icon">üé®</div>
              <div class="cat-label">Hair Color</div>
            </div>
            <div class="cat-card" onclick="filterCat('Nails',this)">
              <div class="cat-icon">üíÖ</div>
              <div class="cat-label">Nails</div>
            </div>
            <div class="cat-card" onclick="filterCat('Makeup',this)">
              <div class="cat-icon">üíÑ</div>
              <div class="cat-label">Makeup</div>
            </div>
          </div>

          <!-- OFFERS -->
          <div class="section-head">
            <h3>üéÅ Offers & Deals</h3>
          </div>
          <div class="offers">
            <div class="offer-card purple">
              <div class="offer-title">20% OFF</div>
              <div class="offer-sub">On your first booking today!</div>
              <div class="offer-btn">Grab Deal</div>
              <div class="offer-emoji">‚úÇÔ∏è</div>
            </div>
            <div class="offer-card pink">
              <div class="offer-title">Free Beard Trim</div>
              <div class="offer-sub">With any Haircut booking</div>
              <div class="offer-btn">Book Now</div>
              <div class="offer-emoji">üßî</div>
            </div>
            <div class="offer-card teal">
              <div class="offer-title">Spa Combo</div>
              <div class="offer-sub">2 services for price of 1</div>
              <div class="offer-btn">Explore</div>
              <div class="offer-emoji">üßñ</div>
            </div>
          </div>

          <!-- LOCATION FILTER -->
          <div class="section-head">
            <h3>üìç Nearby Salons</h3>
            <select id="locationFilter" onchange="filterSalons()"
              style="background:rgba(255,255,255,0.06); border:1px solid var(--border); color:#fff; border-radius:10px; padding:6px 10px; font-size:12px; font-family:'Inter',sans-serif; outline:none;">
              <option value="">All Cities</option>
              <option value="Hyderabad" selected>Hyderabad</option>
              <option value="Bengaluru">Bengaluru</option>
              <option value="Mumbai">Mumbai</option>
              <option value="Delhi">Delhi</option>
              <option value="Pune">Pune</option>
            </select>
          </div>

          <!-- SALON CARDS -->
          <div class="salons-list" id="salonsList">
            {% for salon in salons %}
            <div class="salon-card" data-location="{{ salon.location }}"
              data-cats="{{ salon.services|map(attribute='category')|unique|join(',')|lower }}"
              data-name="{{ salon.name|lower }}"
              data-price="{{ salon.services|map(attribute='price')|min if salon.services else 999 }}">
              <div class="salon-img">
                {% if "Glow" in salon.name %}‚ú®
                {% elif "Urban" in salon.name %}üèôÔ∏è
                {% elif "Royal" in salon.name %}üëë
                {% elif "Mirror" in salon.name %}ü™û
                {% elif "Barber" in salon.name %}üíà
                {% elif "Luxury" in salon.name %}üíé
                {% elif "Budget" in salon.name %}üí∞
                {% elif "Spa" in salon.name %}üßñ
                {% elif "Silicon" in salon.name %}üíª
                {% elif "Garden" in salon.name %}üåø
                {% elif "Bollywood" in salon.name %}üé¨
                {% elif "Elite" in salon.name %}‚≠ê
                {% else %}üíá{% endif %}
              </div>
              <div class="salon-body">
                <div class="salon-top">
                  <div class="salon-name">{{ salon.name }}</div>
                  <span class="salon-badge {{ 'badge-open' if salon.is_open else 'badge-closed' }}">
                    {{ 'üü¢ Open' if salon.is_open else 'üî¥ Closed' }}
                  </span>
                </div>
                <div class="salon-meta">
                  <span><i class="fas fa-star" style="color:#fbbf24;"></i> {{ salon.rating }}</span>
                  <span><i class="fas fa-map-marker-alt" style="color:var(--purple);"></i> {{
                    salon.location.split(',')[0] }}</span>
                  <span><i class="fas fa-walking" style="color:#10b981;"></i> ~1.2 km</span>
                </div>
                <div class="salon-price">
                  ‚Çπ{{ salon.services|map(attribute='price')|min|int if salon.services else '‚Äì' }} onwards
                </div>
                <div class="salon-actions">
                  <a href="{{ url_for('salon_details', salon_id=salon.id) }}" class="btn-book">
                    <i class="fas fa-calendar-plus"></i> Book Now
                  </a>
                  <div class="btn-fav" onclick="toggleFav(this)"><i class="far fa-heart"></i></div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>

          <!-- EMPTY STATE -->
          <div id="emptyState" style="display:none;" class="empty-state">
            <div class="empty-icon">üîç</div>
            <p>No salons found matching your search.</p>
          </div>

        </div><!-- /screen-home -->

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SEARCH SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="screen" id="screen-search">
          <div class="section-head">
            <h3>üîç Search Results</h3>
          </div>
          <div class="search-wrap" style="margin-bottom:16px;">
            <i class="fas fa-search search-icon"></i>
            <input type="text" placeholder="Search salons, services..." oninput="filterSalons()" id="searchInput2"
              style="width:100%; padding:12px 16px 12px 44px; background:rgba(255,255,255,0.06); border:1px solid var(--border); border-radius:14px; color:#fff; font-size:14px; font-family:'Inter',sans-serif; outline:none;" />
          </div>
          <p style="color:var(--muted); font-size:13px; margin-bottom:16px;">Try: "Haircut", "Spa", "Kolkata"...</p>
          <div class="salons-list" id="searchResults">
            {% for salon in salons %}
            <div class="salon-card s-result" data-location="{{ salon.location }}" data-name="{{ salon.name|lower }}"
              data-cats="{{ salon.services|map(attribute='category')|unique|join(',')|lower }}">
              <div class="salon-img">üíá</div>
              <div class="salon-body">
                <div class="salon-top">
                  <div class="salon-name">{{ salon.name }}</div>
                  <span class="salon-badge badge-open">üü¢ Open</span>
                </div>
                <div class="salon-meta">
                  <span><i class="fas fa-star" style="color:#fbbf24;"></i> {{ salon.rating }}</span>
                  <span><i class="fas fa-map-marker-alt" style="color:var(--purple);"></i> {{ salon.location }}</span>
                </div>
                <a href="{{ url_for('salon_details', salon_id=salon.id) }}" class="btn-book"
                  style="display:block; text-align:center; margin-top:10px;">Book Now</a>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê BOOKINGS SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="screen" id="screen-bookings">
          <div class="section-head">
            <h3>üìÖ My Bookings</h3>
          </div>

          <!-- TABS -->
          <div style="display:flex; gap:8px; margin-bottom:20px; overflow-x:auto; padding-bottom:4px;">
            <button class="tab-btn active" onclick="switchTab('upcoming',this)"
              style="flex-shrink:0; padding:8px 18px; border-radius:20px; border:none; background:rgba(168,85,247,0.2); color:var(--purple); font-weight:700; font-size:13px; cursor:pointer;">Upcoming</button>
            <button class="tab-btn" onclick="switchTab('completed',this)"
              style="flex-shrink:0; padding:8px 18px; border-radius:20px; border:1px solid var(--border); background:transparent; color:var(--muted); font-size:13px; font-weight:600; cursor:pointer;">Completed</button>
            <button class="tab-btn" onclick="switchTab('cancelled',this)"
              style="flex-shrink:0; padding:8px 18px; border-radius:20px; border:1px solid var(--border); background:transparent; color:var(--muted); font-size:13px; font-weight:600; cursor:pointer;">Cancelled</button>
          </div>

          <!-- UPCOMING -->
          <div id="tab-upcoming">
            {% set upcoming = user_bookings|selectattr('status','in',['Pending','Confirmed','Accepted'])|list %}
            {% if upcoming %}
            {% for b in upcoming %}
            <div class="booking-card">
              <div class="booking-top">
                <div class="booking-service">{{ b.service.name }}</div>
                <span
                  class="status-badge {{ 'status-confirmed' if b.status=='Confirmed' or b.status=='Accepted' else 'status-pending' }}">
                  {{ 'üü¢ ' if b.status in ['Confirmed','Accepted'] else 'üü° ' }}{{ b.status }}
                </span>
              </div>
              <div class="booking-salon"><i class="fas fa-store" style="color:var(--purple);"></i> {{ b.salon.name }}
              </div>
              <div class="booking-meta">
                <span><i class="fas fa-calendar"></i> {{ b.date }}</span>
                <span><i class="fas fa-clock"></i> {{ b.time }}</span>
              </div>
              <div class="booking-price">‚Çπ{{ b.service.price|int }}</div>
            </div>
            {% endfor %}
            {% else %}
            <div class="empty-state">
              <div class="empty-icon">üìÖ</div>
              <p>No upcoming bookings.<br><a onclick="switchScreen('home',null)"
                  style="color:var(--purple); cursor:pointer;">Book a salon now ‚Üí</a></p>
            </div>
            {% endif %}
          </div>

          <!-- COMPLETED -->
          <div id="tab-completed" style="display:none;">
            {% set done = user_bookings|selectattr('status','equalto','Completed')|list %}
            {% if done %}
            {% for b in done %}
            <div class="booking-card">
              <div class="booking-top">
                <div class="booking-service">{{ b.service.name }}</div>
                <span class="status-badge status-completed">‚úÖ Completed</span>
              </div>
              <div class="booking-salon"><i class="fas fa-store" style="color:var(--purple);"></i> {{ b.salon.name }}
              </div>
              <div class="booking-meta"><span><i class="fas fa-calendar"></i> {{ b.date }}</span></div>
              <div class="booking-price">‚Çπ{{ b.service.price|int }}</div>
            </div>
            {% endfor %}
            {% else %}<div class="empty-state">
              <div class="empty-icon">‚úÖ</div>
              <p>No completed bookings yet.</p>
            </div>{% endif %}
          </div>

          <!-- CANCELLED -->
          <div id="tab-cancelled" style="display:none;">
            {% set cancelled = user_bookings|selectattr('status','equalto','Cancelled')|list %}
            {% if cancelled %}
            {% for b in cancelled %}
            <div class="booking-card">
              <div class="booking-top">
                <div class="booking-service">{{ b.service.name }}</div>
                <span class="status-badge status-cancelled">üî¥ Cancelled</span>
              </div>
              <div class="booking-salon"><i class="fas fa-store" style="color:var(--purple);"></i> {{ b.salon.name }}
              </div>
              <div class="booking-price">‚Çπ{{ b.service.price|int }}</div>
            </div>
            {% endfor %}
            {% else %}<div class="empty-state">
              <div class="empty-icon">‚ùå</div>
              <p>No cancelled bookings.</p>
            </div>{% endif %}
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FAVORITES SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="screen" id="screen-favorites">
          <div class="section-head">
            <h3>‚ù§Ô∏è Saved Salons</h3>
          </div>
          <div class="empty-state" id="favEmpty">
            <div class="empty-icon">üíî</div>
            <p>No favorites yet.<br>Tap the ‚ù§Ô∏è on any salon to save it!</p>
          </div>
          <div id="favList"></div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PROFILE SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="screen" id="screen-profile">
          <div class="profile-panel">
            <div class="profile-avatar-lg">{{ current_user.name[:2]|upper if current_user.is_authenticated else 'üë§' }}
            </div>
            <div class="profile-name">{{ current_user.name if current_user.is_authenticated else 'Guest' }}</div>
            <div class="profile-email">{{ current_user.email if current_user.is_authenticated else '' }}</div>
            <div class="profile-stats">
              <div class="pstat">
                <div class="pstat-num">{{ user_bookings|length }}</div>
                <div class="pstat-label">Total Bookings</div>
              </div>
              <div class="pstat">
                <div class="pstat-num">‚Çπ0</div>
                <div class="pstat-label">Wallet Balance</div>
              </div>
            </div>
          </div>

          <div style="display:flex; flex-direction:column; gap:10px;">
            {% if current_user.role == 'salon_owner' %}
            <a href="{{ url_for('owner_dashboard') }}"
              style="display:flex; align-items:center; gap:14px; padding:16px; background:var(--card); border:1px solid var(--border); border-radius:16px; text-decoration:none; color:#fff; font-weight:700;">
              <span style="font-size:22px;">üè¢</span> Owner Dashboard
              <i class="fas fa-chevron-right" style="margin-left:auto; color:var(--muted);"></i>
            </a>
            {% endif %}
            {% if current_user.role == 'worker' %}
            <a href="{{ url_for('worker_dashboard') }}"
              style="display:flex; align-items:center; gap:14px; padding:16px; background:var(--card); border:1px solid var(--border); border-radius:16px; text-decoration:none; color:#fff; font-weight:700;">
              <span style="font-size:22px;">üëî</span> Worker Dashboard
              <i class="fas fa-chevron-right" style="margin-left:auto; color:var(--muted);"></i>
            </a>
            {% endif %}
            <div
              style="display:flex; align-items:center; gap:14px; padding:16px; background:var(--card); border:1px solid var(--border); border-radius:16px; cursor:pointer;"
              onclick="showToast('üåü You have 540 Loyalty Points!')">
              <span style="font-size:22px;">üåü</span> <span style="font-weight:700;">Loyalty Points</span>
              <span style="margin-left:auto; color:var(--purple); font-weight:800;">540 pts</span>
            </div>
            <div
              style="display:flex; align-items:center; gap:14px; padding:16px; background:var(--card); border:1px solid var(--border); border-radius:16px; cursor:pointer;"
              onclick="showToast('üí∞ Referral Code: SALON500')">
              <span style="font-size:22px;">üí∞</span> <span style="font-weight:700;">Refer & Earn</span>
              <span style="margin-left:auto; color:#10b981; font-weight:700;">‚Çπ500</span>
            </div>
            <a href="{{ url_for('logout') }}"
              style="display:flex; align-items:center; gap:14px; padding:16px; background:rgba(239,68,68,0.08); border:1px solid rgba(239,68,68,0.2); border-radius:16px; text-decoration:none; color:#ef4444; font-weight:700; margin-top:8px;">
              <span style="font-size:22px;">üö™</span> Logout
            </a>
          </div>
        </div>

      </div><!-- /main -->
    </div><!-- /right content -->
  </div><!-- /app-wrapper -->

  <!-- ‚ïê‚ïê BOTTOM NAV ‚ïê‚ïê -->
  <nav class="bottom-nav">
    <button class="nav-item active" id="nav-home" onclick="switchScreen('home',this)"><i
        class="fas fa-home"></i>Home</button>
    <button class="nav-item" id="nav-search" onclick="switchScreen('search',this)"><i
        class="fas fa-search"></i>Search</button>
    <button class="nav-item" id="nav-bookings" onclick="switchScreen('bookings',this)"><i
        class="fas fa-calendar-check"></i>Bookings</button>
    <button class="nav-item" id="nav-favorites" onclick="switchScreen('favorites',this)"><i
        class="fas fa-heart"></i>Favorites</button>
    <button class="nav-item" id="nav-profile" onclick="switchScreen('profile',this)"><i
        class="fas fa-user"></i>Profile</button>
  </nav>

  <script>
    /* ‚îÄ‚îÄ SCREEN SWITCHER ‚îÄ‚îÄ */
    let currentScreen = 'home';
    function switchScreen(name, el) {
      currentScreen = name;
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('is-active'));
      const t = document.getElementById('screen-' + name);
      if (t) t.classList.add('is-active');
      // bottom nav
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      const nb = document.getElementById('nav-' + name);
      if (nb) nb.classList.add('active');
      // sidebar
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      if (el && el.classList && el.classList.contains('sidebar-link')) el.classList.add('active');
      closeDropdowns();
    }

    /* ‚îÄ‚îÄ CATEGORY FILTER ‚îÄ‚îÄ */
    let currentCat = 'all';
    function filterCat(cat, el) {
      currentCat = cat;
      document.querySelectorAll('.cat-card').forEach(c => c.classList.remove('active'));
      if (el) el.classList.add('active');
      filterSalons();
    }

    /* ‚îÄ‚îÄ SALON FILTER ‚îÄ‚îÄ */
    function filterSalons() {
      const search = (document.getElementById('searchInput').value || '').toLowerCase();
      const loc = (document.getElementById('locationFilter') ? document.getElementById('locationFilter').value : '').toLowerCase();
      const cards = document.querySelectorAll('#salonsList .salon-card');
      let visible = 0;

      cards.forEach(card => {
        const name = card.dataset.name || '';
        const location = (card.dataset.location || '').toLowerCase();
        const cats = (card.dataset.cats || '').toLowerCase();

        const matchSearch = !search || name.includes(search) || location.includes(search) || cats.includes(search);
        const matchLoc = !loc || location.includes(loc);
        const matchCat = currentCat === 'all' || cats.includes(currentCat.toLowerCase());

        const show = matchSearch && matchLoc && matchCat;
        card.style.display = show ? 'flex' : 'none';
        if (show) visible++;
      });
      document.getElementById('emptyState').style.display = visible === 0 ? 'block' : 'none';
    }

    /* ‚îÄ‚îÄ BOOKING TABS ‚îÄ‚îÄ */
    function switchTab(tab, btn) {
      ['upcoming', 'completed', 'cancelled'].forEach(t => {
        const el = document.getElementById('tab-' + t);
        if (el) el.style.display = t === tab ? 'block' : 'none';
      });
      document.querySelectorAll('.tab-btn').forEach(b => {
        b.style.background = 'transparent';
        b.style.color = 'var(--muted)';
        b.style.border = '1px solid var(--border)';
      });
      if (btn) {
        btn.style.background = 'rgba(168,85,247,0.2)';
        btn.style.color = 'var(--purple)';
        btn.style.border = 'none';
      }
    }

    /* ‚îÄ‚îÄ FAVORITES ‚îÄ‚îÄ */
    const favSalons = new Set();
    function toggleFav(btn) {
      const icon = btn.querySelector('i');
      icon.classList.toggle('far');
      icon.classList.toggle('fas');
      btn.style.background = icon.classList.contains('fas') ? 'rgba(236,72,153,0.2)' : 'rgba(236,72,153,0.1)';
      showToast(icon.classList.contains('fas') ? '‚ù§Ô∏è Added to favorites!' : 'üíî Removed from favorites');
    }

    /* ‚îÄ‚îÄ NOTIFICATIONS ‚îÄ‚îÄ */
    function toggleDropdown(id) {
      const d = document.getElementById(id);
      d.classList.toggle('open');
    }
    function closeDropdowns() {
      document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('open'));
    }
    document.addEventListener('click', e => {
      if (!e.target.closest('#notifBtn') && !e.target.closest('#notifDrop')) closeDropdowns();
    });

    /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
    function showToast(msg) {
      const t = document.getElementById('toastContainer');
      const el = document.createElement('div');
      el.className = 'toast'; el.textContent = msg;
      t.appendChild(el);
      setTimeout(() => el.remove(), 3000);
    }

    /* ‚îÄ‚îÄ URL PARAM ‚îÄ‚îÄ */
    window.onload = () => {
      const p = new URLSearchParams(window.location.search).get('screen');
      if (p) switchScreen(p, null);
      filterSalons();
    };
  </script>
</body>

</html>